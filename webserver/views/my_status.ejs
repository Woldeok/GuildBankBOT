<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>내 현황</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        .card {
            border-radius: 15px;
        }
        .text-success {
            color: #28a745 !important;
        }
        .text-danger {
            color: #dc3545 !important;
        }
    </style>
</head>
<body class="d-flex flex-column justify-content-center align-items-center min-vh-100 bg-light">
    <div class="card p-4 shadow-lg" style="width: 30rem;">
        <h1 class="text-center mb-4">👤 내 현황</h1>

        <h2 class="h5">💰 소지액: <%= formatDecimal(userBalance) %>원</h2>
        <h2 class="h5 mb-3">💸 총 대출액: <%= formatDecimal(totalLoanAmount) %>원</h2>

        <hr>

        <h3 class="h5 mb-3">보유 주식 현황:</h3>
        <% if (ownedStocks && ownedStocks.length > 0) { %>
            <ul class="list-group mb-3">
                <% ownedStocks.forEach(stock => { %>
                    <li class="list-group-item">
                        <strong><%= stock.name %> (<%= stock.symbol %>)</strong><br>
                        보유 수량: <%= formatDecimal(stock.quantity) %>주<br>
                        현재 가격: <%= formatDecimal(stock.current_price) %>원<br>
                        평균 매수 가격: <%= formatDecimal(stock.average_purchase_price) %>원<br>
                        평가액: <%= formatDecimal(stock.currentValue) %>원
                        <% if (stock.profit !== undefined) { %>
                            <br>수익: <span class="<%= stock.profit.greaterThanOrEqualTo(0) ? 'text-success' : 'text-danger' %>">
                                <%= stock.profit.greaterThanOrEqualTo(0) ? '+' : '' %><%= formatDecimal(stock.profit) %>원 (<%= stock.profitRate.toFixed(2) %>%)
                            </span>
                        <% } %>
                    </li>
                <% }); %>
            </ul>
        <% } else { %>
            <p>보유한 주식이 없습니다.</p>
        <% } %>

        <div class="text-center mt-4">
            <a href="/" class="btn btn-secondary">대시보드로 돌아가기</a>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>